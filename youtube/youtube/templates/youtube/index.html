{% load static %}
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>MTube Premium</title>
        <link rel="stylesheet" href={% static 'css/style.css' %}>
        <link rel="stylesheet" href={% static 'css/popup.css' %}>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <div class="title">MTube Premium</div>
                <form class="search" action="/youtube/results/" method="GET">
                    <input type="text" placeholder="Search..."/ name="search_key">
                    <button>Search</button>
                </form>
                <div class="login">
                    {% if user.is_authenticated %}
                    <button class="button_login" id="logout" onclick="location.href='{% url 'logout' %}'">로그아웃</button>
                    <span class="user_name">{{ user.username }}님<br><a href="{% url 'youtube:profile_delete' %}">회원탈퇴</a></span>
                    {% else %}
                    <button class="button_login" id="login" onclick="location.href='{% url 'login' %}'">로그인</button>
                    <span class="user_name">손님</span>
                    {% endif %}
                </div>
            </div>
            <div class="left">
                {% if user.is_authenticated %}
                    <form action="/youtube/history/" method="GET">
                        <button class="button" type="submit">시청 기록</button>
                    </form>
                    <br>
                    {% for list in play_list %}
                    <form id = "{{ list.id }}" action="/youtube/playlist/" method="POST">
                        {% csrf_token %}
                        <button class="button" type="submit" name="listid" value="{{ list.id }}"> {{ list.list_name }}</button>
                    </form>
                    {% endfor %}
                    {% if play_list.count < 8 %}
                    <button class="button2" type="button" onClick="openForm()"> 목록 추가</button>
                    <div class="playListPopup">
                        <div class="formPopup" id="popupForm">
                            <form action="/youtube/playlist/insert/" class="formContainer" method="POST">
                                {% csrf_token %}
                                <input type="text" id="name" placeholder="재생목록 이름" name="name" required>
                                <button type="submit" class="btn">추가</button>
                                <button type="button" class="btn cancel" onclick="closeForm()">취소</button>
                            </form>
                        </div>
                    </div>
                    {% endif %}
                {% endif %}
            </div>
            <div class="main">
                <div id="player"></div>
            </div>
            <div class="bottom">
                <!--
                <button class="button2" type="button" onClick="AjaxFormSubmit()"> 재생목록에 추가</button>
                <div class="playListPopup">
                    <div class="formPopup" id="popupForm">
                        <form action="/youtube/playlist/insert/" class="formContainer" method="POST">
                            {% csrf_token %}
                            <input type="text" id="name" placeholder="재생목록 이름" name="name" required>
                            <button type="submit" class="btn">추가</button>
                            <button type="button" class="btn cancel" onclick="closeForm()">취소</button>
                        </form>
                    </div>
                </div>
                                <form id = "" action="/youtube/playlist/insert_video/" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="listid" value="{{ list.id }}">
                    <input type="hidden" name="videoid" value="0-q1KafFCLU">
                    <button class="button" type="submit">{{ list.list_name }}<br>추가</button>
                </form>
                -->
                
                {% for list in play_list %}
                <button class="insert" type="button" onclick="insertVideoToPlaylist('{{ list.id }}')">
                    {{ list.list_name }}<br>추가
                </button>
                {% endfor %}
                
            </div>
            <div class="right">
                <div class="title">검색 결과</div>
                {% if video_list %}
                <table class="table" id = "table">
                    {% for video in video_list %}
                    <tr class="tr" id = "{{video.videoid}}" onclick = "itemClicked(this)">
                        <td><image src="{{ video.image_url }}"></td>
                        <td>{{ video.title }}</td>
                        <td><button class="btn_delete" onclick="event.cancelBubble=true; itemDelete()"><span class="material-icons">delete</span></button></td>
                    </tr>
                    {% endfor %}
                </table>
                {% endif %}
            </div>
        </div>
        <form name="postForm" action="" method="post">
            {% csrf_token %}
            <input type="hidden" name="videoid">
        </form>
        <script type="text/javascript" language="javascript" src={% static 'js/index.js' %}></script>
    </body>
</html>